<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>controllers.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Activity.html">Activity</a></li>
            
                <li><a href="..&#x2F;classes/ActivityController.html">ActivityController</a></li>
            
                <li><a href="..&#x2F;classes/Constraint.html">Constraint</a></li>
            
                <li><a href="..&#x2F;classes/ConstraintController.html">ConstraintController</a></li>
            
                <li><a href="..&#x2F;classes/Counter.html">Counter</a></li>
            
                <li><a href="..&#x2F;classes/CounterController.html">CounterController</a></li>
            
                <li><a href="..&#x2F;classes/CSVParser.html">CSVParser</a></li>
            
                <li><a href="..&#x2F;classes/FacadeController.html">FacadeController</a></li>
            
                <li><a href="..&#x2F;classes/FileManager.html">FileManager</a></li>
            
                <li><a href="..&#x2F;classes/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;classes/Method.html">Method</a></li>
            
                <li><a href="..&#x2F;classes/MethodController.html">MethodController</a></li>
            
                <li><a href="..&#x2F;classes/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;classes/Planner.html">Planner</a></li>
            
                <li><a href="..&#x2F;classes/Recommender.html">Recommender</a></li>
            
                <li><a href="..&#x2F;classes/Slider.html">Slider</a></li>
            
                <li><a href="..&#x2F;classes/SliderController.html">SliderController</a></li>
            
                <li><a href="..&#x2F;classes/Subactivity.html">Subactivity</a></li>
            
                <li><a href="..&#x2F;classes/SubactivityController.html">SubactivityController</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounter.html">TotalCounter</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounterController.html">TotalCounterController</a></li>
            
                <li><a href="..&#x2F;classes/Weight.html">Weight</a></li>
            
                <li><a href="..&#x2F;classes/WeightCollection.html">WeightCollection</a></li>
            
                <li><a href="..&#x2F;classes/XMLParser.html">XMLParser</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/App.html">App</a></li>
            
                <li><a href="..&#x2F;modules/Collections.html">Collections</a></li>
            
                <li><a href="..&#x2F;modules/Constants.html">Constants</a></li>
            
                <li><a href="..&#x2F;modules/Controllers.html">Controllers</a></li>
            
                <li><a href="..&#x2F;modules/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;modules/Models.html">Models</a></li>
            
                <li><a href="..&#x2F;modules/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;modules/UP.html">UP</a></li>
            
                <li><a href="..&#x2F;modules/Util.html">Util</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: controllers.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class SliderController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.SliderController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
			&#x2F;* Attributes *&#x2F;
			
			&#x2F;**
			 * The model bound to the controller
			 * @property model
			 * @type Slider
			 *&#x2F;
			this.model = this.options.model;
			
			&#x2F;**
			 * The view represented by the DOM node caught with jQuery
			 * @property model
			 * @type jQuery Object
			 *&#x2F;
			this.sliderView = $(&#x27;#slider&#x27;);

			
			&#x2F;* Initialization *&#x2F;
			
			this.updateValue( UP.constants.SLIDER_VALUE );

			var self = this;
			
			this.sliderView.slider({		&#x2F;* Slider Widget Configuration Setup *&#x2F;
				orientation: &quot;horizontal&quot;,
				range: &quot;min&quot;,
				min: 0,
				max: UP.constants.VALUE.length-1,
				value: this.sliderValue,
				animate: true,
				slide: function(event, ui) {	&#x2F;&#x2F; Event function to perfom
					self.updateValue(ui.value);
				}
			});
			
		},
		
		
		&#x2F;**
		 * @method updateValue
		 * @param newValue {number} The new slider value selected by the user when moving the slider UI component
		 *&#x2F;
		updateValue: function(newValue) {
			this.sliderValue = newValue;
			this.model.updateValue(newValue);
		}

	});

	
	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class ConstraintController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.ConstraintController = Backbone.Controller.extend({
	
		events: {
			&quot;click&quot; : &quot;constraintSelected&quot;
		},
		
		
		&#x2F;**
		 * @method constraintSelected
		 * @param event {Event} The jQuery event fired after a constraint has been clicked
		 *&#x2F;
		constraintSelected: function(event) {
			event.preventDefault();

			var checkbox = this.$el.find(&#x27;.checkboxWrapper&#x27;);
			activateCheckbox(checkbox);
			
			this.model.changeSelection();
		}
		
	});

	
	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class CounterController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.CounterController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
			&#x2F;**
			 * The model bound to the controller
			 * @property model
			 * @type Counter
			 *&#x2F;
			this.model.on(&#x27;change&#x27;, this.updateCounter, this);

			&#x2F;**
			 * The view (DOM node) associated to the controller
			 * @property model
			 * @type jQuery Object
			 *&#x2F;
			this.$el.on(&quot;click&quot;, this.scrollToList);
		},


		&#x2F;**
		 * @method scrollToList
		 * @param event {Event} The jQuery event fired after a constraint has been clicked
		 *&#x2F;
		scrollToList: function(event) {
			event.preventDefault();

			var linkCounter = $(this);

			var section = linkCounter.attr(&#x27;href&#x27;);
			var sectionPosition = Math.floor($(section).offset().top);

			$(&#x27;html, body&#x27;).animate({scrollTop: sectionPosition}, UP.constants.FADE_SPEED);
		},
		
		
		&#x2F;**
		 * @method updateCounter
		 *&#x2F;
		updateCounter: function() {
			var newValue = this.model.get(&#x27;value&#x27;);
			this.$el.find(&#x27;.filter-count&#x27;).text(newValue);
		}
		
	});


	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class TotalCounterController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.TotalCounterController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
			this.model.on(&#x27;change&#x27;, this.updateCounter, this);
		},

		
		&#x2F;**
		 * @method updateCounter
		 *&#x2F;
		updateCounter: function() {
			var newValue = this.model.get(&#x27;value&#x27;);
			this.$el.find(&#x27;.filter-count&#x27;).text(newValue);
		}
		
	});
	
	
	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class MethodController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.MethodController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
		    &#x2F;**
			 * @property model
			 * @type Method
			 *&#x2F;
			this.model      = this.options.model;

			&#x2F;**
			 * @property methodView
			 * @type jQuery Object
			 *&#x2F;
			this.methodView = this.options.methodView;
			
			&#x2F;**
			 * @property planView
			 * @type jQuery Object
			 *&#x2F;
			this.planView   = this.options.planView;


			&#x2F;&#x2F; Observing model
			this.model.on(&#x27;render&#x27;, this.render, this);
			this.model.on(&#x27;updatePosition&#x27;, this.updatePosition, this);
			this.model.on(&#x27;hideMethod&#x27;, this.hideMethod, this);
			this.model.on(&#x27;showNeutral&#x27;, this.showNeutral, this);


			&#x2F;&#x2F; Event Handlers

			var self = this;
			function checkboxAnimation(e) {
				self.checkboxEvent(e);
			}

			this.methodView.find(&#x27;.checkboxWrapper&#x27;).on(&quot;click&quot;, checkboxAnimation);
			this.planView.find(&#x27;.checkboxWrapper&#x27;).on(&quot;click&quot;, checkboxAnimation);

			this.methodView.find(&#x27;.method-info&#x27;).on(&quot;click&quot;, this.displayInfoEvent);
			this.planView.find(&#x27;.method-info&#x27;).on(&quot;click&quot;, this.displayInfoEvent);


			&#x2F;&#x2F; Initialize visual text description

			var description = this.model.getDescription();
			this.methodView.find(&#x27;.method-description&#x27;).text( description );
			this.planView.find(&#x27;.method-description&#x27;).text( description );

		},

		
		&#x2F;**
		 * @method render
		 *&#x2F;
		render: function() {
			var color;
			var textValue = &quot;&quot;;

			var newValue = this.model.getValue();

			if (newValue &gt;= 0.8) {
				textValue = UP.constants.VALUE[0];
				color = &quot;green&quot;;
			} else if (newValue &gt;= 0.6) {
				textValue = UP.constants.VALUE[1];
				color = &quot;greenyellow&quot;;
			} else if (newValue &gt;= 0.4) {
				textValue = UP.constants.VALUE[2];
				color = &quot;yellow&quot;;
			} else if (newValue &gt;= 0.2) {
				textValue = UP.constants.VALUE[3];
				color = &quot;orange&quot;;
			} else if (newValue &gt; 0) {
				textValue = UP.constants.VALUE[4];
				color = &quot;red&quot;;
			} else if (newValue == 0) {
				textValue = UP.constants.VALUE[3];
				color = &quot;orange&quot;;
			}

			this.methodView.find(&#x27;.valoration&#x27;).text(textValue);
			this.methodView.find(&#x27;.bar&#x27;).attr(&#x27;class&#x27;, &#x27;bar&#x27;).addClass(color);

			this.planView.find(&#x27;.valoration&#x27;).text(textValue);
			this.planView.find(&#x27;.bar&#x27;).attr(&#x27;class&#x27;, &#x27;bar&#x27;).addClass(color);

			console.log(&quot;RENDER!!!&quot;);
		},


		&#x2F;**
		 * @method updatePosition
		 *&#x2F;
		updatePosition: function() {
			this.methodView.parent().prepend(this.methodView);
			this.planView.parent().prepend(this.planView);
		},


		&#x2F;**
		 * @method hideMethod
		 * @param event {Event} The jQuery event fired
		 *&#x2F;
		hideMethod: function(event) {
			if ( this.model.getValue() == 0 ) {
				this.showNeutral();
			} else {
				var sliderValue = event.sliderValue;
				var VALUES = UP.constants.VALUE;

				this.methodView.addClass(&#x27;hidden&#x27;).removeClass(&#x27;visible&#x27;).removeClass(&#x27;last-method&#x27;);
				this.planView.addClass(&#x27;hidden&#x27;).removeClass(&#x27;visible&#x27;).removeClass(&#x27;last-method&#x27;);

				this.model.unselectMethod();

				var stringValue = this.methodView.find(&#x27;.valoration&#x27;).text();

				for ( var j=0; j &lt;= sliderValue &amp;&amp; j &lt; VALUES.length; j++ ) {
					if ( stringValue === VALUES[j] ) {
						this.methodView.removeClass(&#x27;hidden&#x27;).addClass(&#x27;visible&#x27;);
						this.planView.removeClass(&#x27;hidden&#x27;).addClass(&#x27;visible&#x27;);
						this.model.selectMethod();
					}
				}
			}
		},

		
		&#x2F;**
		 * @method showNeutral
		 *&#x2F;
		showNeutral: function() {
			this.methodView.removeClass(&#x27;hidden&#x27;).addClass(&#x27;visible&#x27;).removeClass(&#x27;last-method&#x27;);
			this.planView.removeClass(&#x27;hidden&#x27;).addClass(&#x27;visible&#x27;).removeClass(&#x27;last-method&#x27;);

			this.model.selectMethod();
		},

		
		&#x2F;**
		 * @method checkboxEvent
		 * @param event {Event} The jQuery event fired
		 *&#x2F;
		checkboxEvent: function(event) {
			event.preventDefault();

			var checkbox = this.methodView.find(&#x27;.checkboxWrapper&#x27;);
			activateCheckbox(checkbox);

			var method = checkbox.parent(&#x27;.method&#x27;);
			this.disableMethodAnimation(method);

			this.model.changeSelection();
			this.planView.toggleClass(&#x27;visible hidden&#x27;);
		},
		
		
		&#x2F;**
		 * @method displayInfoEvent
		 *&#x2F;
		displayInfoEvent: function() {
			var FADE_SPEED = UP.constants.FADE_SPEED;
			var METHOD_HEIGHT = UP.constants.METHOD_HEIGHT;

			var $this = $(this);
			var description  = $this.siblings(&#x27;.method-description&#x27;);
			var expandButton = $this.find(&#x27;.expand-button&#x27;);
			var method       = $this.parent();
			
			if (description.hasClass(&#x27;hidden&#x27;)) {
				description.css({opacity: 0});
				description.removeClass(&#x27;hidden&#x27;);

				method.css({ height: METHOD_HEIGHT });

				var height = description.height() + 40;
				method.stop().animate({height: height}, FADE_SPEED);
				
				description.stop().animate({opacity: 1}, FADE_SPEED);
				expandButton.addClass(&#x27;expanded&#x27;);
			} else {
				method.stop().animate({height: METHOD_HEIGHT}, FADE_SPEED);
				description.stop().animate({opacity: 0}, FADE_SPEED, function() {
					description.addClass(&#x27;hidden&#x27;);
				});
				expandButton.removeClass(&#x27;expanded&#x27;);
			}
		},

		
		&#x2F;**
		 * @method disableMethodAnimation
		 * @param li {jQuery Object} The method which receives a graphic animation
		 *&#x2F;
		disableMethodAnimation: function(li) {
			var FADE_SPEED = UP.constants.FADE_SPEED;
			var DISABLED_OPACITY = UP.constants.DISABLED_OPACITY;

			var CSSClass = &#x27;disabled&#x27;;
			var bar = li.find(&#x27;.bar&#x27;);
			
			if (li.hasClass(CSSClass)) {
				li.removeClass(CSSClass);
				li.animate({opacity: &#x27;1&#x27;}, FADE_SPEED);
				bar.animate({opacity: &#x27;1&#x27;}, FADE_SPEED);
			} else {
				li.addClass(CSSClass);
				li.animate({opacity: DISABLED_OPACITY}, FADE_SPEED);
				bar.animate({opacity: DISABLED_OPACITY}, FADE_SPEED);
			}
		}, 


		&#x2F;**
		 * @method isSelected
		 * @return selected {boolean} returns a boolean value which express whereas the method is selected or not
		 *&#x2F;
		 &#x2F;&#x2F; deprecated ???
		isSelected: function() {
			&#x2F;&#x2F;return this.model.get(&#x27;selected&#x27;);
			return this.model.isSelected();
		},

		
		&#x2F;**
		 * @method isVisible
		 * @return visible {boolean} returns a boolean value which express whereas the method is visible or not
		 *&#x2F;
		isVisible: function() {
			return this.methodView.hasClass(&#x27;visible&#x27;);
		}

	});


	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class SubactivityController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.SubactivityController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
			&#x2F;**
			 * @property model
			 * @type Subactivity
			 *&#x2F;
			this.model    = this.options.model;
			
			&#x2F;**
			 * @property item
			 * @type jQuery Object
			 *&#x2F;
			this.item     = this.options.item;
			
			&#x2F;**
			 * @property list
			 * @type jQuery Object
			 *&#x2F;
			this.list     = this.options.list;
			
			&#x2F;**
			 * @property listPlan
			 * @type jQuery Object
			 *&#x2F;
			this.listPlan = this.options.listPlan;


			&#x2F;&#x2F; Handle Events
			var self = this;

			this.model.on(&#x27;updateLastMethod&#x27;, this.updateLastMethod, this);
			this.model.on(&#x27;changeDisplayList&#x27;, this.displayList, this);

			this.item.on(&quot;click&quot;, function(e) {
				e.preventDefault();
				self.model.changeSelection();	&#x2F;&#x2F; Actualizar el modelo de &#x27;Subactivity&#x27; llamando a su mï¿½todo select
				self.displayList();
			});

			function expandAnimation() {
				self.expandList();
			}

			this.list.find(&#x27;.expandable&#x27;).on(&#x27;click&#x27;, expandAnimation);
			this.listPlan.find(&#x27;.expandable&#x27;).on(&#x27;click&#x27;, expandAnimation);
		},

		
		&#x2F;**
		 * @method isVisible
		 *&#x2F;
		displayList: function() {
			var checkbox = this.item.find(&#x27;.checkboxWrapper&#x27;);
			activateCheckbox(checkbox);
			
			this.list.toggleClass(&#x27;hidden&#x27;);
			this.listPlan.toggleClass(&#x27;hidden&#x27;);

			constraintsSelectionFix();
		},
		
		
		&#x2F;**
		 * @method expandList
		 *&#x2F;
		expandList: function() {
			var header     = this.list.find(&#x27;.expandable&#x27;);
			var headerPlan = this.listPlan.find(&#x27;.expandable&#x27;);

			var headerVisible = true;
			var bothCollapsed = header.hasClass(&#x27;collapsed&#x27;) &amp;&amp; headerPlan.hasClass(&#x27;collapsed&#x27;);

			if ( bothCollapsed ) {
				this.slideDown(headerVisible);
			} else {
				this.slideUp(headerVisible);
			}

			header.toggleClass(&#x27;collapsed&#x27;);
			headerPlan.toggleClass(&#x27;collapsed&#x27;);
		},

		
		&#x2F;**
		 * @method slideUp
		 * @param headerVisible {boolean} 
		 *&#x2F;
		slideUp: function(headerVisible) {
			var selected = this.model.get(&#x27;selected&#x27;);
			if (selected) {
				if (headerVisible == true) {
					this.list.find(&#x27;.list-methods&#x27;).slideUp(UP.constants.SLIDE_SPEED, slideUpFix);
					this.listPlan.find(&#x27;.list-methods&#x27;).slideUp(UP.constants.SLIDE_SPEED, slideUpFix);
				} else {
					this.list.slideUp(UP.constants.SLIDE_SPEED, slideUpFix);
					this.listPlan.slideUp(UP.constants.SLIDE_SPEED, slideUpFix);
				}
			}
		},

		
		&#x2F;**
		 * @method slideDown
		 * @param headerVisible {boolean} 
		 *&#x2F;
		slideDown: function(headerVisible) {
			var selected = this.model.get(&#x27;selected&#x27;);
			if (selected) {
				if (headerVisible == true) {
					this.list.find(&#x27;.list-methods&#x27;).slideDown(UP.constants.SLIDE_SPEED, slideDownFix);
					this.listPlan.find(&#x27;.list-methods&#x27;).slideDown(UP.constants.SLIDE_SPEED, slideDownFix);
				} else {
					this.list.slideDown(UP.constants.SLIDE_SPEED, slideDownFix);
					this.listPlan.slideDown(UP.constants.SLIDE_SPEED, slideDownFix);
				}
			}
		},

		
		&#x2F;**
		 * @method updateLastMethod
		 *&#x2F;
		updateLastMethod: function() {
			this.list.find(&#x27;.visible&#x27;).last().addClass(&#x27;last-method&#x27;);
			this.listPlan.find(&#x27;.visible&#x27;).last().addClass(&#x27;last-method&#x27;);
		},

		&#x2F;&#x2F; deprecated ???
		isSelected: function() {
			&#x2F;&#x2F;return this.model.get(&#x27;selected&#x27;);
			return this.model.isSelected();
		},

		
		&#x2F;&#x2F; deprecated ???
		&#x2F;**
		 * @method addClassIfLast
		 *&#x2F;
		addClassIfLast: function() {
			console.log(&quot;entramos aqui&quot;);
			var subs = $(&#x27;.info-subactivity&#x27;).not(&#x27;hidden&#x27;);
			if ( this.list == subs.last() ) {
				this.list.addClass(&#x27;last-subactivity&#x27;);
			}
		}

	});

	
	
	&#x2F;**
	 * @module UP
	 * @submodule Controllers
	 * @class ActivityController
	 * @extends Backbone.Controller
	 *&#x2F;	
	UP.ActivityController = Backbone.Controller.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
			&#x2F;**
			 * @property model
			 * @type Activity
			 *&#x2F;
			this.model    = this.options.model;				&#x2F;&#x2F; The Activity Model
			
			&#x2F;**
			 * @property block
			 * @type jQuery Object
			 *&#x2F;
			this.block    = this.options.block;				&#x2F;&#x2F; View: Panel with the description on &#x27;Activities&#x27; Window
			
			&#x2F;**
			 * @property tab
			 * @type jQuery Object
			 *&#x2F;
			this.tab      = this.options.tab;					&#x2F;&#x2F; View: Tab above the panel
			
			&#x2F;**
			 * @property list
			 * @type jQuery Object
			 *&#x2F;
			this.list     = this.options.list;					&#x2F;&#x2F; View: Subactivities List on &#x27;Methods&#x27; Window
			
			&#x2F;**
			 * @property listPlan
			 * @type jQuery Object
			 *&#x2F;
			this.listPlan = this.options.listPlan;				&#x2F;&#x2F; View: Subactivities List on &#x27;Plan&#x27; Window

			&#x2F;**
			 * @property expandButton
			 * @type jQuery Object
			 *&#x2F;
			this.expandButton   = $(&#x27;#expand&#x27;);
			
			&#x2F;**
			 * @property collapseButton
			 * @type jQuery Object
			 *&#x2F;
			this.collapseButton = $(&#x27;#collapse&#x27;);

			&#x2F;**
			 * @property subactivities
			 * @type Array[Subactivity]
			 *&#x2F;
			this.subactivities = [];

			
			
			this.model.on(&#x27;hideHeader&#x27;, this.hideHeader, this);
			this.model.on(&#x27;showHeader&#x27;, this.showHeader, this);


			&#x2F;&#x2F; Handle Events
			var self = this;

			this.expandButton.on(&quot;click&quot;, function(event) {
				self.expandButtonEvent(event);
			});
			
			this.collapseButton.on(&quot;click&quot;, function(event) {
				self.collapseButtonEvent(event);
			});

			this.tab.on(&#x27;click&#x27;, function() {
				return self.displayActivityEvent();
			});


			function expandAnimation() {
				if ( $(this).hasClass(&#x27;collapsed&#x27;) ) {
					self.expandList();
				} else {
					self.collapseList();
				}
			}

			this.list.children(&#x27;.expandable&#x27;).on(&#x27;click&#x27;, expandAnimation);
			this.listPlan.children(&#x27;.expandable&#x27;).on(&#x27;click&#x27;, expandAnimation);

		},

		
		&#x2F;**
		 * @method hideHeader
		 *&#x2F;
		hideHeader: function() {
			this.list.children(&#x27;.expandable&#x27;).addClass(&#x27;hidden&#x27;);
			this.listPlan.children(&#x27;.expandable&#x27;).addClass(&#x27;hidden&#x27;);
		},

		
		&#x2F;**
		 * @method showHeader
		 *&#x2F;
		showHeader: function() {
			this.list.children(&#x27;.expandable&#x27;).removeClass(&#x27;hidden&#x27;);
			this.listPlan.children(&#x27;.expandable&#x27;).removeClass(&#x27;hidden&#x27;);
		},

		
		&#x2F;**
		 * @method displayActivityEvent
		 *&#x2F;
		displayActivityEvent: function() {
			this.hideRestOfActivities();
			this.tab.addClass(&#x27;tab-active&#x27;);

			this.block.removeClass(&#x27;hidden&#x27;);
		},

		
		&#x2F;**
		 * @method expandList
		 *&#x2F;
		expandList: function() {
			var header     = this.list.children(&#x27;.expandable&#x27;);
			var headerPlan = this.listPlan.children(&#x27;.expandable&#x27;);

			var bothCollapsed = header.hasClass(&#x27;collapsed&#x27;) &amp;&amp; headerPlan.hasClass(&#x27;collapsed&#x27;);

			if ( bothCollapsed ) {
				for (var i=0; i&lt;this.subactivities.length; i++) {
					this.subactivities[i].slideDown();
				}
			} 

			header.removeClass(&#x27;collapsed&#x27;);
			headerPlan.removeClass(&#x27;collapsed&#x27;);
		},

		
		&#x2F;**
		 * @method collapseList
		 *&#x2F;
		collapseList: function() {
			var header = this.list.children(&#x27;.expandable&#x27;);
			var headerPlan = this.listPlan.children(&#x27;.expandable&#x27;);

			var bothNotCollapsed = !header.hasClass(&#x27;collapsed&#x27;) &amp;&amp; !headerPlan.hasClass(&#x27;collapsed&#x27;);

			if ( bothNotCollapsed ) {
				for (var i=0; i&lt;this.subactivities.length; i++) {
					this.subactivities[i].slideUp();
				}
			}

			header.addClass(&#x27;collapsed&#x27;);
			headerPlan.addClass(&#x27;collapsed&#x27;);
		},

		
		&#x2F;**
		 * @method hideRestOfActivities
		 *&#x2F;
		hideRestOfActivities: function() {
			for (var i=0; i &lt; this.activities.length; i++) {
				var view = this.activities[i];
				if (this != view) {
					view.hideActivity();
				}
			}
		},
		
		
		&#x2F;**
		 * @method hideActivity
		 *&#x2F;
		hideActivity: function() {
			this.tab.removeClass(&#x27;tab-active&#x27;);
			this.block.addClass(&#x27;hidden&#x27;);
		},

		
		&#x2F;**
		 * @method expandButtonEvent
		 * @param event {Event} The jQuery event fired
		 *&#x2F;
		expandButtonEvent: function(event) {
			this.expandList();
		},

		
		&#x2F;**
		 * @method collapseButtonEvent
		 * @param event {Event} The jQuery event fired
		 *&#x2F;
		collapseButtonEvent: function(event) {
			this.collapseList();
		},


		&#x2F;**
		 * @method setSubactivities
		 * @param subactivities {Array[SubactivityController]} 
		 *&#x2F;
		setSubactivities: function(subactivities) {
			this.subactivities = subactivities;
		},

		
		&#x2F;**
		 * @method setActivities
		 * @param activities {Array[ActivityController]} 
		 *&#x2F;
		setActivities: function(activities) {
			this.activities = activities;
		}

	});


	&#x2F;* Auxiliary Function *&#x2F;

	function activateCheckbox(obj) {
		obj.find(&#x27;a&#x27;).toggleClass(&#x27;checked&#x27;);
	}


	&#x2F;* Subactivities Callback Fixes *&#x2F;

	function slideUpFix() {
		$(this).css({display : &quot;&quot;}).addClass(&#x27;hidden&#x27;);
	}

	function slideDownFix() {
		$(this).removeClass(&#x27;hidden&#x27;);
	}


	&#x2F;* Constraint Aside Panel Fix *&#x2F;

	function constraintsSelectionFix() {
		var cs = $(&#x27;#constraints-selection&#x27;);
		cs.height( cs.parent(&#x27;.content&#x27;).height() );
	}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>

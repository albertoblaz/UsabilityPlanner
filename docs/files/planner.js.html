<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>planner.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Activity.html">Activity</a></li>
            
                <li><a href="..&#x2F;classes/ActivityController.html">ActivityController</a></li>
            
                <li><a href="..&#x2F;classes/Constraint.html">Constraint</a></li>
            
                <li><a href="..&#x2F;classes/ConstraintController.html">ConstraintController</a></li>
            
                <li><a href="..&#x2F;classes/Counter.html">Counter</a></li>
            
                <li><a href="..&#x2F;classes/CounterController.html">CounterController</a></li>
            
                <li><a href="..&#x2F;classes/CSVParser.html">CSVParser</a></li>
            
                <li><a href="..&#x2F;classes/FacadeController.html">FacadeController</a></li>
            
                <li><a href="..&#x2F;classes/FileManager.html">FileManager</a></li>
            
                <li><a href="..&#x2F;classes/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;classes/Method.html">Method</a></li>
            
                <li><a href="..&#x2F;classes/MethodController.html">MethodController</a></li>
            
                <li><a href="..&#x2F;classes/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;classes/Planner.html">Planner</a></li>
            
                <li><a href="..&#x2F;classes/Recommender.html">Recommender</a></li>
            
                <li><a href="..&#x2F;classes/Slider.html">Slider</a></li>
            
                <li><a href="..&#x2F;classes/SliderController.html">SliderController</a></li>
            
                <li><a href="..&#x2F;classes/Subactivity.html">Subactivity</a></li>
            
                <li><a href="..&#x2F;classes/SubactivityController.html">SubactivityController</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounter.html">TotalCounter</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounterController.html">TotalCounterController</a></li>
            
                <li><a href="..&#x2F;classes/Weight.html">Weight</a></li>
            
                <li><a href="..&#x2F;classes/WeightCollection.html">WeightCollection</a></li>
            
                <li><a href="..&#x2F;classes/XMLParser.html">XMLParser</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/App.html">App</a></li>
            
                <li><a href="..&#x2F;modules/Collections.html">Collections</a></li>
            
                <li><a href="..&#x2F;modules/Constants.html">Constants</a></li>
            
                <li><a href="..&#x2F;modules/Controllers.html">Controllers</a></li>
            
                <li><a href="..&#x2F;modules/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;modules/Models.html">Models</a></li>
            
                <li><a href="..&#x2F;modules/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;modules/UP.html">UP</a></li>
            
                <li><a href="..&#x2F;modules/Util.html">Util</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: planner.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
	
	&#x2F;**
	 * @module UP
	 * @submodule Util
	 * @class Planner
	 * @extends Backbone.Model
	 *&#x2F;	
	UP.Planner = Backbone.Model.extend({
	
		&#x2F;**
		 * @method initialize
		 * @constructor
		 *&#x2F;
		initialize: function() {
		
			this.set({
			
				&#x2F;**
				 * @property slider
				 * @type Slider
				 * @default &quot;new Slider()&quot;
				 *&#x2F;
				&quot;slider&quot; : new UP.Slider();
			});

			var self = this;
			var slider = this.get(&#x27;slider&#x27;);
			
			slider.on(&#x27;change&#x27;, function(event) {
				self.hideMethods();
			});

			new UP.SliderController({ model : slider });
		},

		
		&#x2F;**
		 * @method loadInitPlan
		 * @param plan {Plan}
		 *&#x2F;
		loadInitPlan: function(plan) {
		
			this.set({
			
				&#x2F;**
				* @property plan
				* @type Plan
				*&#x2F;
				&quot;plan&quot; : plan
			});

			console.log(&quot;Loaded Plan&quot;);

			plan.getConstraints().on(&#x27;updateMethods&#x27;, function() {
				var sliderValue = this.get(&#x27;slider&#x27;).getValue();

				plan.getActivities().each(function(activity) {
					activity.updateMethods(sliderValue);
				});

			}, this);

			this.hideMethods();
		},


		&#x2F;**
		 * @method loadNewPlan
		 * @param plan {Plan}
		 *&#x2F;
		loadNewPlan: function(plan) {
			console.log(&quot;Re-Loaded Plan&quot;);

			var oldConstraints = this.get(&#x27;plan&#x27;).getConstraints();
			var newConstraints = plan.getConstraints();

			var oldSelectedConstraints = this.get(&#x27;plan&#x27;).getSelectedConstraints();

			oldSelectedConstraints.each(function(c) {
				c.unselectConstraint();
			});

			this.replaceConstraintsWeights(newConstraints, oldConstraints);

			var oldMethods = this.get(&#x27;plan&#x27;).getMethods();
			var newMethods = plan.getNewMethods();

			this.replaceMethodsWeights(newMethods, oldMethods);

			oldSelectedConstraints.each(function(c) {
				c.selectConstraint();
			});

			var sliderValue = this.get(&#x27;slider&#x27;).getValue();
			this.get(&#x27;plan&#x27;).getActivities().each(function(act) {
				act.updateMethods(sliderValue);
			});

		},


		&#x2F;**
		 * @method savePlan
		 * @return plan {Plan}
		 *&#x2F;
		savePlan: function() {
			console.log(&quot;Saved Plan&quot;);

			&#x2F;&#x2F;return new UP.Plan(this.get(&#x27;constraints&#x27;), this.get(&#x27;activities&#x27;));
			return this.get(&#x27;plan&#x27;);

		},

		
		&#x2F;**
		 * @method replaceConstraintsWeights
		 * @param newCol {ConstraintCollection}
		 * @param oldCol {ConstraintCollection}
		 *&#x2F;
		replaceConstraintsWeights: function(newCol, oldCol) {
			newCol.each(function(newC) {
				oldCol.each(function(oldC) {
					if ( newC.compareNameWith(oldC.getName()) ) {
						oldC.replaceWeights( newC.getWeights() );
					}
				});
			});
		},


		&#x2F;**
		 * @method replaceMethodsWeights
		 * @param newCol {MethodCollection}
		 * @param oldCol {MethodCollection}
		 *&#x2F;
		replaceMethodsWeights: function(newCol, oldCol) {
			newCol.each(function(newM) {
				oldCol.each(function(oldM) {
					if ( newM.compareNameWith(oldM.getName()) ) {
						oldM.removeWeights();
						oldM.addWeightCollection( newM.getWeights() );
					}
				});
			});
		},


		&#x2F;**
		 * @method hideMethods
		 *&#x2F;
		hideMethods: function() {
			var sliderValue = this.get(&#x27;slider&#x27;).getValue();

			this.get(&#x27;plan&#x27;).getActivities().each(function(act) {
				act.hideMethods(sliderValue);
			});
		}

	});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>

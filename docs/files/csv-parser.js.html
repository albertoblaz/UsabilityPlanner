<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>csv-parser.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Activity.html">Activity</a></li>
            
                <li><a href="..&#x2F;classes/ActivityController.html">ActivityController</a></li>
            
                <li><a href="..&#x2F;classes/Constraint.html">Constraint</a></li>
            
                <li><a href="..&#x2F;classes/ConstraintController.html">ConstraintController</a></li>
            
                <li><a href="..&#x2F;classes/Counter.html">Counter</a></li>
            
                <li><a href="..&#x2F;classes/CounterController.html">CounterController</a></li>
            
                <li><a href="..&#x2F;classes/CSVParser.html">CSVParser</a></li>
            
                <li><a href="..&#x2F;classes/FacadeController.html">FacadeController</a></li>
            
                <li><a href="..&#x2F;classes/FileManager.html">FileManager</a></li>
            
                <li><a href="..&#x2F;classes/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;classes/Method.html">Method</a></li>
            
                <li><a href="..&#x2F;classes/MethodController.html">MethodController</a></li>
            
                <li><a href="..&#x2F;classes/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;classes/Planner.html">Planner</a></li>
            
                <li><a href="..&#x2F;classes/Recommender.html">Recommender</a></li>
            
                <li><a href="..&#x2F;classes/Slider.html">Slider</a></li>
            
                <li><a href="..&#x2F;classes/SliderController.html">SliderController</a></li>
            
                <li><a href="..&#x2F;classes/Subactivity.html">Subactivity</a></li>
            
                <li><a href="..&#x2F;classes/SubactivityController.html">SubactivityController</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounter.html">TotalCounter</a></li>
            
                <li><a href="..&#x2F;classes/TotalCounterController.html">TotalCounterController</a></li>
            
                <li><a href="..&#x2F;classes/Weight.html">Weight</a></li>
            
                <li><a href="..&#x2F;classes/WeightCollection.html">WeightCollection</a></li>
            
                <li><a href="..&#x2F;classes/XMLParser.html">XMLParser</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/App.html">App</a></li>
            
                <li><a href="..&#x2F;modules/Collections.html">Collections</a></li>
            
                <li><a href="..&#x2F;modules/Constants.html">Constants</a></li>
            
                <li><a href="..&#x2F;modules/Controllers.html">Controllers</a></li>
            
                <li><a href="..&#x2F;modules/Main.html">Main</a></li>
            
                <li><a href="..&#x2F;modules/Models.html">Models</a></li>
            
                <li><a href="..&#x2F;modules/Plan.html">Plan</a></li>
            
                <li><a href="..&#x2F;modules/UP.html">UP</a></li>
            
                <li><a href="..&#x2F;modules/Util.html">Util</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: csv-parser.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
	
	&#x2F;**
	 * @module UP
	 * @submodule Util
	 * @class CSVParser
	 * @extends Backbone.Model
	 *&#x2F;	
	UP.CSVParser = Backbone.Model.extend({

		&#x2F;**
		 * @method CSVToArray
		 * @param strData {string} 
		 * @param strDelimiter {string} 
		 *&#x2F;
		CSVToArray: function(strData, strDelimiter) {
			&#x2F;&#x2F; The code of this method has been extracted from:  http:&#x2F;&#x2F;stackoverflow.com&#x2F;questions&#x2F;1293147&#x2F;javascript-code-to-parse-csv-data

			&#x2F;&#x2F; Check to see if the delimiter is defined. If not, &#x2F;&#x2F; then default to comma.
			strDelimiter = (strDelimiter || &quot;;&quot;);

			&#x2F;&#x2F; Create a regular expression to parse the CSV values.
			var objPattern = new RegExp(
				(
					&#x2F;&#x2F; Delimiters.
					&quot;(\\&quot; + strDelimiter + &quot;|\\r?\\n|\\r|^)&quot; +

					&#x2F;&#x2F; Quoted fields.
					&quot;(?:\&quot;([^\&quot;]*(?:\&quot;\&quot;[^\&quot;]*)*)\&quot;|&quot; +

					&#x2F;&#x2F; Standard fields.
					&quot;([^\&quot;\\&quot; + strDelimiter + &quot;\\r\\n]*))&quot;

				), &quot;gi&quot;
			);


			&#x2F;&#x2F; Create an array to hold our data. Give the array a default empty first row.
			var arrData = [[]];

			&#x2F;&#x2F; Create an array to hold our individual pattern matching groups.
			var arrMatches = null;


			&#x2F;&#x2F; Keep looping over the regular expression matches until we can no longer find a match.
			while (arrMatches = objPattern.exec( strData )){

					&#x2F;&#x2F; Get the delimiter that was found.
					var strMatchedDelimiter = arrMatches[ 1 ];

					&#x2F;&#x2F; Check to see if the given delimiter has a length (is not the start of string) and if it matches field delimiter. 
					&#x2F;&#x2F; If id does not, then we know that this delimiter is a row delimiter.
					if ( strMatchedDelimiter.length &amp;&amp; (strMatchedDelimiter != strDelimiter) ) {

							&#x2F;&#x2F; Since we have reached a new row of data, add an empty row to our data array.
							arrData.push( [] );
					}


					&#x2F;&#x2F; Now that we have our delimiter out of the way, let&#x27;s check to see which kind of value we captured (quoted or unquoted).
					if ( arrMatches[ 2 ] ) {

							&#x2F;&#x2F; We found a quoted value. When we capture this value, unescape any double quotes.
							var strMatchedValue = arrMatches[ 2 ].replace( new RegExp( &quot;\&quot;\&quot;&quot;, &quot;g&quot; ), &quot;\&quot;&quot; );

					} else {

							&#x2F;&#x2F; We found a non-quoted value.
							var strMatchedValue = arrMatches[ 3 ];

					}


					&#x2F;&#x2F; Now that we have our value string, let&#x27;s add it to the data array.
					arrData[ arrData.length - 1 ].push( strMatchedValue );
			}

			&#x2F;&#x2F; Return the parsed data.
			return( arrData );
		},

		
		&#x2F;**
		 * @method generatePlanFrom
		 * @param csv {string} 
		 * @return newPlan {Plan}
		 *&#x2F;
		generatePlanFrom: function(csv) {
			var data = this.CSVToArray(csv);

			var newConstraints = new UP.ConstraintCollection();
			var newMethods     = new UP.MethodCollection();

			var constraintsName = data[0];
			var name, c;
			for ( var i=2; i &lt; constraintsName.length; i++) {
				name = constraintsName[i];
				c = new UP.Constraint(name);
				newConstraints.add( c );
			}

			var dataMethod, name, m;
			for ( var i=1; i &lt; data.length; i++ ) {
				dataMethod = data[i];
				name = dataMethod[0];
				m = new UP.Method( name );


				var weightValue, w, c;
				for ( var j=2; j &lt; dataMethod.length; j++ ) {
					weightValue = parseInt( dataMethod[j] );
					w = new UP.Weight( m, weightValue);
					m.addWeight( w );
					c = newConstraints.at( j-2 );
					c.addWeight( w );
				}

				newMethods.add( m );
			}

			var newPlan = new UP.Plan( newConstraints, null );
			newPlan.setNewMethods( newMethods );

			return newPlan;
		},
		
		
		&#x2F;**
		 * @method generateCSVFrom
		 * @param plan {Plan} 
		 * @return csv {string}
		 *&#x2F;
		generateCSVFrom: function(plan) {
			var constraints = plan.getConstraints();
			var methods = plan.getSelectedMethods();

			var csv = &quot;Method;Value&quot;;

			constraints.each(function(c) {
				csv += c.toCSV();
			});

			methods.each(function(m) {
				csv += (&quot;\r\n&quot; + m.toCSV());
			});

			return csv;
		}

	});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
